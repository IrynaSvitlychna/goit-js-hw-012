{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport xOctagon from \"/img/bi_x-octagon.svg\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.5,\n  showCounter: false,\n  });\n\n \nconst API_KEY = '41942157-8ce243761fb563c2a1b85d8a4';\nconst API_BASE_URL = 'https://pixabay.com/api/';\naxios.defaults.baseURL = API_BASE_URL;\n\nconst searchingForm = document.querySelector('#form');\nconst searchInput = document.querySelector('#searchInput');\nconst gallery = document.querySelector('.gallery');\nconst loadImagesButton = document.querySelector('#loadBtn');\nconst loader = document.querySelector('.loader');\n\nlet scrollOffset = innerHeight;\nlet currentPage = 1;\nconst per_page = 40;\nlet userSearchRequest;\n\nwindow.scrollBy(0, scrollOffset);\n\nsearchingForm.addEventListener('submit', requestImages);\nloadImagesButton.addEventListener('click', loadMoreImages);\n\nasync function requestImages(e) {\n    e.preventDefault();\n    resetGallery();\n    userSearchRequest = searchInput.value;\n    await fetchAndRenderImages();\n  }\n\nasync function fetchAndRenderImages() {\n    try {\n      const response = await axios.get(API_BASE_URL, {\n        params: getAPIParams(),\n      });\n      const images = response.data;\n      if (images.hits.length === 0) {\n        showMessage(`There are no images matching your search query. Please try again!`);\n      }\n      galleryCreation(images.hits);\n      handleLoadMoreButton(images.totalHits);\n    } catch (error) {\n        showMessage('Oops... Something went wrong');\n    } finally {\n      loader.classList.add('hide');\n    }\n  }\n\nfunction galleryCreation(images) {\n    currentPage ++;\n    const markup = images.reduce(\n        (\n          html,\n          { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n        ) =>\n          html +\n          `\n          <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\">\n              <img  class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"image-desc\">\n              <ul class =\"gallery-item-description-list\">\n                <li class=\"image-desc-item\">\n                  <div class=\"image-desc-label\">Likes</div>\n                  <div>${likes}</div>\n                </li>\n                <li class=\"image-desc-item\">\n                   <div class=\"image-desc-label\">Views</div>\n                   <div>${views}</div>\n                </li>\n                <li class=\"image-desc-item\">\n                  <div class=\"image-desc-label\">Comments</div>\n                  <div>${comments}</div>\n                </li>\n                <li class=\"image-desc-item\">\n                  <div class=\"image-desc-label\">Downloads</div>\n                  <div>${downloads}</div>\n                </li>\n              </ul>\n            </div>\n          </li>\n          `,\n        ''\n      );\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    scrollOffset = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n    lightbox.refresh();\n  }\n\n  async function loadMoreImages() {\n    loadImagesButton.classList.add('hide');\n    loader.classList.remove('hide');\n    await fetchAndRenderImages();\n  }\n\n  function resetGallery() {\n    loadImagesButton.classList.add('hide');\n    loader.classList.remove('hide');\n    currentPage = 1;\n    gallery.innerHTML = '';\n  }\n\n  function getAPIParams() {\n    return {\n      key: API_KEY,\n      q: userSearchRequest,\n      orientation: 'horizontal',\n      image_type: 'photo',\n      safesearch: true,\n      currentPage,\n      per_page,\n    };\n  }\n\n  function handleLoadMoreButton(totalHits) {\n    const totalPages = Math.ceil(totalHits / per_page);\n    if (currentPage > totalPages) {\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n        loadImagesButton.classList.remove('hide');\n    }\n  }\n\n  function showMessage(message) {\n    iziToast.show({\n      close: false, \n      iconUrl: `${xOctagon}`,\n      closeOnClick: true,\n      message,\n      messageColor: 'white',\n      timeout: 3000,\n      transitionIn: 'flipInX',\n      transitionOut: 'flipOutX',\n      position: 'topRight',\n      backgroundColor: 'red',\n      progressBar: false,\n    });\n  }\n\n\n \n\n    \n"],"names":["xOctagon","lightbox","SimpleLightbox","API_KEY","API_BASE_URL","axios","searchingForm","searchInput","gallery","loadImagesButton","loader","scrollOffset","currentPage","per_page","userSearchRequest","requestImages","loadMoreImages","e","resetGallery","fetchAndRenderImages","images","getAPIParams","showMessage","galleryCreation","handleLoadMoreButton","markup","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","totalHits","totalPages","message","iziToast"],"mappings":"owBAAA,MAAeA,EAAA,mDCWTC,EAAW,IAAIC,EAAe,aAAc,CAChD,eAAgB,GAChB,YAAa,EACf,CAAG,EAGGC,EAAU,qCACVC,EAAe,2BACrBC,EAAM,SAAS,QAAUD,EAEzB,MAAME,EAAgB,SAAS,cAAc,OAAO,EAC9CC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAe,YACfC,EAAc,EAClB,MAAMC,EAAW,GACjB,IAAIC,EAEJ,OAAO,SAAS,EAAGH,CAAY,EAE/BL,EAAc,iBAAiB,SAAUS,CAAa,EACtDN,EAAiB,iBAAiB,QAASO,CAAc,EAEzD,eAAeD,EAAcE,EAAG,CAC5BA,EAAE,eAAc,EAChBC,IACAJ,EAAoBP,EAAY,MAChC,MAAMY,EAAoB,CAC3B,CAEH,eAAeA,GAAuB,CAClC,GAAI,CAIF,MAAMC,GAHW,MAAMf,EAAM,IAAID,EAAc,CAC7C,OAAQiB,EAAc,CAC9B,CAAO,GACuB,KACpBD,EAAO,KAAK,SAAW,GACzBE,EAAY,mEAAmE,EAEjFC,EAAgBH,EAAO,IAAI,EAC3BI,EAAqBJ,EAAO,SAAS,CACtC,MAAC,CACEE,EAAY,8BAA8B,CAClD,QAAc,CACRZ,EAAO,UAAU,IAAI,MAAM,CAC5B,CACF,CAEH,SAASa,EAAgBH,EAAQ,CAC7BR,IACA,MAAMa,EAASL,EAAO,OAClB,CACEM,EACA,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAExEP,EACA;AAAA;AAAA,uBAEaE;AAAA,iDAC0BD,WAAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAM9CC;AAAA;AAAA;AAAA;AAAA,0BAICC;AAAA;AAAA;AAAA;AAAA,yBAIDC;AAAA;AAAA;AAAA;AAAA,yBAIAC;AAAA;AAAA;AAAA;AAAA;AAAA,YAMjB,EACR,EAEIzB,EAAQ,mBAAmB,YAAaiB,CAAM,EAC9Cd,EAAe,SACd,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OACzBV,EAAS,QAAO,CACjB,CAED,eAAee,GAAiB,CAC9BP,EAAiB,UAAU,IAAI,MAAM,EACrCC,EAAO,UAAU,OAAO,MAAM,EAC9B,MAAMS,EAAoB,CAC3B,CAED,SAASD,GAAe,CACtBT,EAAiB,UAAU,IAAI,MAAM,EACrCC,EAAO,UAAU,OAAO,MAAM,EAC9BE,EAAc,EACdJ,EAAQ,UAAY,EACrB,CAED,SAASa,GAAe,CACtB,MAAO,CACL,IAAKlB,EACL,EAAGW,EACH,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,YAAAF,EACA,SAAAC,CACN,CACG,CAED,SAASW,EAAqBU,EAAW,CACvC,MAAMC,EAAa,KAAK,KAAKD,EAAYrB,CAAQ,EAC7CD,EAAcuB,EAChBb,EAAY,4DAA4D,EAEtEb,EAAiB,UAAU,OAAO,MAAM,CAE7C,CAED,SAASa,EAAYc,EAAS,CAC5BC,EAAS,KAAK,CACZ,MAAO,GACP,QAAS,GAAGrC,IACZ,aAAc,GACd,QAAAoC,EACA,aAAc,QACd,QAAS,IACT,aAAc,UACd,cAAe,WACf,SAAU,WACV,gBAAiB,MACjB,YAAa,EACnB,CAAK,CACL"}